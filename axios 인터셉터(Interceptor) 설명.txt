axios ì¸í„°ì…‰í„°(Interceptor) ì„¤ëª… 
 
axiosì˜ ìš”ì²­(Request)ì´ë‚˜ ì‘ë‹µ(Response)ì— ë¼ì–´ë“¤ì–´ ë¯¸ë¦¬ ê°€ê³µí•˜ê±°ë‚˜ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ê¸°ëŠ¥ì´ì—ìš”.

âœ… ì‰½ê²Œ ë§í•´ì„œâ€¦
axiosì—ì„œ ìš”ì²­ì´ë‚˜ ì‘ë‹µì´ ì„œë²„ë¡œ ê°€ê¸° ì „, ë˜ëŠ” ì„œë²„ì—ì„œ ì˜¤ê¸° ì „ì—,
ì¤‘ê°„ì—ì„œ ê°€ë¡œì±„ì„œ(add/edit) ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ì—ìš”.

ğŸ§© ì˜ˆì‹œë¡œ ì´í•´í•´ë³¼ê²Œìš”

ğŸ“¦ 1. ìš”ì²­ ì¸í„°ì…‰í„° (request interceptor)
ì„œë²„ì— ìš”ì²­ ë³´ë‚´ê¸° ì „ì— í† í°ì„ ë„£ì–´ì£¼ëŠ” ì˜ˆ:

axios.interceptors.request.use((config) => {
  const token = localStorage.getItem("token");
  if (token) {
    config.headers.Authorization = `Bearer ${token}`; // ìš”ì²­ í—¤ë”ì— í† í° ì¶”ê°€
  }
  return config;
});

ğŸ“Œ ì´ë ‡ê²Œ í•˜ë©´ ëª¨ë“  axios ìš”ì²­ì— ìë™ìœ¼ë¡œ í† í°ì´ ë“¤ì–´ê°€ìš”!
â†’ ë§¤ë²ˆ ì§ì ‘ ë„£ì„ í•„ìš” ì—†ìŒ!


ğŸ“¦ 2. ì‘ë‹µ ì¸í„°ì…‰í„° (response interceptor)
ì„œë²„ì—ì„œ ì‘ë‹µì´ ì™”ì„ ë•Œ ì—ëŸ¬ ìƒíƒœë¥¼ ì²˜ë¦¬í•˜ëŠ” ì˜ˆ:

axios.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤!");
      router.push("/login");
    }
    return Promise.reject(error); // ë‚˜ë¨¸ì§€ëŠ” ê·¸ëŒ€ë¡œ ë˜ì§
  }
);

ğŸ“Œ ì´ë ‡ê²Œ í•˜ë©´ 401 ì‘ë‹µì´ ì˜¤ë©´ ìë™ìœ¼ë¡œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ê²Œ í•  ìˆ˜ ìˆì–´ìš”.

